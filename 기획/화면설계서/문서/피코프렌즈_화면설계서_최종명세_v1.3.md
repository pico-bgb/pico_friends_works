# 피코프렌즈 화면설계서 최종 명세서

**문서명**: [Web] 피코프렌즈 화면설계서 Ver 1.3 (최종)
**플랫폼**: Mobile Web
**버전**: v1.3 (v1.2 리뷰 회의 결과 반영)
**최종 작성일**: 2025-10-27

---

## 목차

1. [프론트엔드 - 사용자 화면](#1-프론트엔드---사용자-화면)
   - [PF-010: 로그인/회원가입](#pf-010-로그인회원가입)
   - [PF-020: 로그인 후 화면](#pf-020-로그인-후-화면)
2. [백오피스 - 관리자 화면](#2-백오피스---관리자-화면)
   - [대시보드](#대시보드)
   - [사용자 관리](#사용자-관리)
   - [약국 관리](#약국-관리)
   - [업무 분배](#업무-분배)
   - [게시물 관리](#게시물-관리)
   - [통계](#통계)

---

## 1. 프론트엔드 - 사용자 화면

### PF-010: 로그인/회원가입

#### 로그인 화면
- **이메일 주소** 입력 필드
- **비밀번호** 입력 필드
- **회원가입** 링크

#### 회원가입 화면
- **이메일 주소** (필수)
- **비밀번호** (필수)
- **이름** (필수)
  - 예시: 홍길동
- **전화번호** (필수)
  - 형식: 010-1234-5678
- **소속학교** (필수)
  - 드롭다운 선택
  - 37개 학교 중 선택

---

### PF-020: 로그인 후 화면

#### 1. 배정된 업무 없음 화면

**주요 기능:**
- 로그인 후 화면: **배정된 업무 요청 버튼** 표시
- **공지사항**: 롤링 배너
  - 최근 작성 3개가 10초 간격으로 반복
- **공지사항 팝업**:
  - 관리자 작성 공지 (이미지와 텍스트)
  - 클릭 시 원래 화면으로 돌아감
- **마이페이지**
- **업무 요청 기능**
- **상담톡** (TALK 버튼)

#### 2. 마이페이지

**대시보드 기능:**
- 오늘 방문약국 수
- 회원가입 약국 수
- 이미지: 관리자가 지정한 이미지 노출

**랭킹보드:**

**표기 항목 (CRM/대시보드 노출):**
- **순위 (Rank)**: 금주 최종 순위 (1위 ~ 10위)
- **이름 (Name)**: 피코프렌즈 닉네임 (로그인 아이디 앞 3글자 + ***)
- **순위 변동 (Rate of Change)**: 지난주 대비 순위 증감
- **회원가입 약국 수 (Pharm)**: 해당 주차 피코픽 가입한 약국 수

**집계 기준:**
- **집계 시간**: 매주 금요일 18:00
- **집계 방식**: 해당 시점까지 누적된 총점(아래 점수 참고)으로 금주 순위 비교
- **대상**: 지난주 금요일 18:00 기준 순위 (1주 차이는 'NEW')
- **데이터 기준**: O월 O주차 전체 랭킹 - 해당 주차 일요일 저녁 6시 데이터 기준

**점수 산정 기준 (KPI):**
- **기본 방문 (Visit)**: CRM 기준 약국 방문 로그 1개당 **10점**
- **회원가입 산정 (Sign)**: 피코픽 신규 가입 1개당 **100점**

**순위 변동 표기:**
- **▲N**: 지난주 대비 N 순위 상승 (예: 15위 → 10위 시, △5)
- **▼N**: 지난주 대비 N 순위 하락 (예: 10위 → 12위 시, ▽2)
- **-**: 순위 변동 없음
- **NEW**: 랭킹보드 신규 진입 (1주 차 랭킹 시작 시 표기 'NEW')

#### 3. 배정된 업무 화면

**검색 필터 (4단계):**
1. **Select Box**: 전체보기 선택
2. **Calendar**: 시작일 (예: 2022.08.05)
3. **Calendar**: 종료일 (예: 2022.09.05)
4. **Text Box**: 약국명 검색

**필터 디자인:**
- 필터는 한 줄로 표현하지 않고 독립적으로 표현

**약국 리스트:**
- **약국명**: OOO 약국
- **전화번호**
- **주소**
- **방문 인증 버튼** (파란색) / **가입 완료 버튼** (회색)

**페이지네이션:**
- 10개 기준으로 출력

#### 4. 방문 인증 프로세스

**방문 인증 상태:**
- **배정된 약국**: 방문 인증이 완료되지 않았을 때 파란색 버튼 활성화
- **방문 인증 완료**: 클릭 비활성화, 자동으로 "방문 완료"로 변경
- **회원가입 확인**: 사업자 번호 기준으로 회원 가입 완료 확인 시 버튼이 파란색에서 회색으로 변경

**페이지네이션:**
- **이전**: 10 페이지 단위로 이동 (예: 15 → 1)
- **다음**: 10 페이지 단위로 이동 (예: 5 → 11)
- **맨 끝으로**: 어디에서든 맨 끝 페이지로 이동

**방문 인증 단계:**
1. 방문 인증 버튼 클릭
2. 위치 확인
3. **방문 사진 등록 팝업**
4. **설문 조사**: 관리자가 지정한 설문조사
5. **방문 완료 처리**: 설문조사 완료 후 자동 방문 완료
   - 이후 해당 사업자 번호로 피코픽 가입 시 "방문 완료"가 "가입 완료"로 표기

#### 5. 메모(특이사항) - 약국 방문 설문 🆕 v1.3 업데이트

**리포트 기능:**
- 구글 설문에 등록된 엑셀 파일의 약국 정보들 불러오기
- 리포트는 다음 번 업무 배정 시에도 누적
- 설문 조사 데이터는 관리자에서 등록 가능

**설문 구성:**

##### 1. 약국 기본 정보

| 항목 | 타입 | 필수 여부 | 설명 |
|------|------|-----------|------|
| 약사님 성함 | 텍스트 입력 (단답형) | 필수 | 약사 이름 직접 입력 |
| 약사님 연락처 | 텍스트 입력 (번호 형식) | 선택 | 010-1234-1234 형식 |

##### 2. 약국 운영 및 애로 사항

**온라인 이용 현황** (필수)
- **입력 타입**: 체크박스 (다중 선택 가능)
- **선택지**:
  - ✓ HMP홈(온라인판)
  - 새로맘
  - 닥삼
  - 바로팜
  - 팜스트리트
  - 광중삼
  - JW삼
  - 유한몰
  - 기타 (텍스트 직접 입력)

**주력 판매 상품군** (필수)
- **입력 타입**: 체크박스 (다중 선택 가능)
- **선택지**:
  - 전문의약품
  - 일반의약품
  - 의약외품
  - 건강 기능식품
  - 의료기기 및 기타

**주력 판매 제품**
- **입력 타입**: 텍스트 입력
- **설명**: 구체적인 제품명 입력

**가장 시급하게 필요한 제품 또는 서비스** (필수)
- **입력 타입**: 텍스트 입력 (장문형)

**마케팅/홍보 관련 고민**
- **입력 타입**: 텍스트 입력 (장문형)

##### 3. 피코프렌즈 반응

**피코픽 혜택 안내 후 반응** (필수)
- **입력 타입**: 라디오 버튼 (단일 선택)
- **선택지**:
  - ○ 매우 좋음
  - ○ 좋음
  - ○ 보통
  - ○ 나쁨
  - ○ 기타 (텍스트 직접 입력)

**현장활동 요약 및 다음 단계 계획** (필수)
- **입력 타입**: 텍스트 입력 (장문형)

**구현 참고사항:**
- 각 항목별 피코프렌즈가 직접 작성
- 약사님 이름/연락처는 약국 연락처와 구분되는 개인 정보
- 설문 조사 데이터는 관리자에서 출제 및 수정 가능
- 작성된 설문은 백오피스에서 확인 가능

---

## 2. 백오피스 - 관리자 화면

### 메뉴 구조

관리자 로그인 후 홈 화면 - **6개 탭 메뉴:**
1. 대시보드
2. 사용자 관리
3. 약국 관리
4. 업무 분배
5. 게시물 관리
6. 통계

---

### 대시보드

#### 피코프렌즈 전체 대상 통계

**전체 통계:**
- **약국 방문 (전체)**: OO
- **회원 가입 (전체)**: OO
- **전환율 (전체)**: 00%
  - 계산식: (약국 가입 수 ÷ 전체 방문 수) × 100

**오늘 현재 통계:**
- **약국 방문 (오늘)**: OO
- **회원 가입 (오늘)**: OO
- **전환율 (오늘)**: 00%

#### 전체 진척률
- **구분**: 오늘, 전체 구분해서 볼 수 있어야 함
- **기준**: 등록된 약국 기준 방문 수, 회원 가입 수를 기준으로 진척률 확인
- **계산식**: 진척률(%) = (현재일까지 계획된 작업량 ÷ 프로젝트 전체 작업량) × 100

#### 프렌즈별 활동 순위
- 피코프렌즈 전체 인원 통계 그래프
- 데이터: 약국 방문, 회원가입 기준으로 막대바 그래프 표출
- **조회 단위**: 일차, 주차, 월간

#### 학교별 성과
- 그래프 표시

**참고:**
- 일부 데이터 빠진 경우, 상세의 경우 Redash 활용

---

### 사용자 관리

#### 조건부 검색 필터
- **역할**: 전체보기, 관리자, 피코프렌즈
- **상태**: 전체보기, 승인됨, 승인대기, 승인거부
- **이름으로 검색**

#### 사용자 등록

**수동 사용자 등록:**
- 회원가입 폼과 동일
- 사용자 구분: 관리자, 부어(부관리자?), 피코프렌즈
- **필드**: 이메일, 비밀번호, 이름, 전화, 소속

**CSV 다운로드:**
- 전체 목록 다운로드
- 사용한 검색 조건으로 다운로드

#### 사용자 테이블

**컬럼:**
- 이름
- 이메일(ID)
- 전화번호
- 소속
- 상태
- 관리
- 비고

**관리 액션:**
- **승인 버튼** (녹색)
- **거부 버튼** (빨간색)
- **수정 아이콘**: 관리자가 사용자 정보 수정
- **삭제 아이콘**: 사용자 정보 삭제

#### 사용자 회원 가입 승인/거부
- 버튼 형태로 승인/거부를 결정할 수 있도록 함
- 승인 후 로그인 가능

#### 관리자 코멘트
- 사용자에 대한 메모 기능

#### 사용자 등록/정보 상세 패널
- 우측에 패널 형태로 표시

---

### 약국 관리

#### 주요 기능
- **새 약국 추가**: 테이블의 정보를 입력하여 등록
- **CSV 가져오기**: CSV로 작성한 파일로 시스템에 등록
- **CSV 내보내기**: 등록된 약국 리스트를 내보내기

#### 약국 테이블

**컬럼:**
- 이름
- 주소
- 전화번호
- 관리
- 비고

**관리:**
- **수정 아이콘**
- **삭제 아이콘**

**비고:**
- **히스토리 아이콘** 클릭 시 약국 방문 히스토리 팝업 표시
- 담당자, 설문 데이터 확인 가능

#### 약국 등록/수정 패널
- **위치**: 우측에 표시
- **필드**:
  - 이름
  - 주소
  - 전화번호

#### 약국 방문 히스토리 팝업 🆕 v1.3 업데이트

**팝업 헤더 정보:**
- **약국 이름**: OOOO약국
- **약국 사업자번호**: 000-00-00000
- **약사 이름**: OOO
- **약국 연락처**: 00-000-0000

**히스토리 테이블:**

| 컬럼명 | 설명 |
|--------|------|
| 방문일시 | 피코프렌즈 방문 일시 (YYYY-MM-DD HH:mm) |
| 회원 가입 일시 | 피코픽 가입 일시 (YYYY-MM-DD HH:mm), 미가입 시 빈 값 |
| 피코프렌즈 | 방문한 피코프렌즈 이름 |
| 설문조사 | 파란색 버튼, 클릭 시 설문 내용 확인 팝업 |
| 비고 | 관리자가 직접 텍스트 입력/수정 가능 |

**기능 설명:**

1. **비고 아이콘 클릭 시**
   - 약국 이름, 약사 이름, 약국 사업자번호, 약국 연락처 정보 표시
   - 해당 약국에 대한 모든 방문 이력을 시간순으로 표시

2. **피코프렌즈 방문 기록**
   - 방문한 피코프렌즈 이름 표시
   - 회원가입 시 관련 기록 확인
   - 회원가입한 경우 가입 완료 일시 표기

3. **설문조사 버튼**
   - 클릭 시 해당 방문 시 작성한 설문 내용 전체 확인 가능
   - 모달 또는 사이드 패널로 표시

4. **비고 (관리자 메모)**
   - 관리자가 직접 텍스트 입력
   - 인라인 편집 또는 수정 버튼으로 수정 가능

---

### 업무 분배

#### 조건부 검색 필터
- **약국 배정**: 전체보기, 배정, 미배정
- **상태**: 전체보기, 승인됨, 승인대기, 승인거부
- **약국 이름으로 검색**

#### CSV 기능
- CSV 가져와 지정된 월별로 업무 분배
- CSV 형태로 내보냄

#### 업무 배분 테이블

**컬럼:**
- 체크박스
- 이름
- 주소
- 전화번호
- 상태
- 피코프렌즈
- 비고

**피코프렌즈 컬럼:**
- 배정됨 (파란색 버튼)

#### 업무 할당 프로세스

1. 체크박스에 체크
2. 체크된 항목 수가 나타남
3. 클릭 시 팝업(3-1)이 노출되며 업무 할당 가능

**3-1. 피코프렌즈 업무 배분 패널:**
- 등록된 피코프렌즈를 검색 및 업무 분배
- **피코프렌즈 이름 검색**
- **테이블**: 체크박스, 이름, 학교

#### 히스토리 기능
- 현재 담당 표시
- 비고 클릭 시 피코프렌즈 히스토리 확인
- **히스토리 항목**: 이름/활동기간/설문데이터 확인 가능

---

### 게시물 관리

#### 1. 공지 관리

**공지 관리 리스트:**
- 공지 관리 클릭 시 '해당 내용 상세보기' 화면으로 이동
- **리스트 수**: 10개
- **노출항목**:
  - 번호
  - 제목
  - 작성일
  - 작성자

**게시판 테이블:**
- 번호
- 제목
- 작성일
- 작성자
- 제목 + 내용 검색바
- 페이지네이션

**본문 내용:**
- 본문 내 이미지 첨부 시 카페24 이미지 노출

**공지 작성:**
- 버튼 클릭 시 공지 작성 화면(3-1)으로 이동
- 기본 게시판 컴포넌트 사용

**3-1. 카테고리로 구분:**
- **【랭킹보드】**: 랭킹보드에 나타나는 이미지 관리
- **【공지사항】**: 롤링되는 공지사항 관리
- **【업무요청】**: 학생들이 업무 분배를 받지 못했을 때 분배를 요청하는 정보 기록 및 관리

**게시판 편집 패널 필드:**
- 카테고리
- 작성자
- 제목
- 내용 (에디터 - WYSIWYG)
- 목록보기 버튼
- 등록하기 버튼

#### 2. 설문조사 관리

**설문지 목록 화면:**

**주요 기능:**
1. **게시물 관리 이동**
2. **설문지 목록**: 설문지의 제목, 무제 표기
3. **새 설문지 생성 버튼**: 클릭 시 팝업으로 나타남
4. **설문지 수정 및 삭제 가능**
5. **설문 목록**: 1 페이지 내 5 개 노출 (화면 구성에 따라 더 많이 노출 가능)
6. **설문 페이지 및 검색 가능**

**새 설문지 생성:**

**제목, 부제 텍스트 입력:**
- 질문 버튼 클릭 시 해당 형태의 설문조사가 나타남

**질문 타입:**
- **단답형**: 100 글자 이내 짧은 텍스트 작성
- **장문형**: 1,000 글자 이내 긴 텍스트 작성
- **선택형**: 최대 6 개 선택지, 6번 목록은 기타로

**선택형 버튼 클릭시 생성되는 질문:**
- 설문지 제목
- 설문지 내용 입력
- **선택지**:
  - "내용을 입력하세요" 필드
  - **선택지 추가** 버튼 (클릭 시 선택 칸 증가)
- 질문 타입 선택: 단답형, 장문형, 선택형

---

### 통계

#### 조건부 검색 필터
1. **드롭다운**: 전체보기
   - **분류**: 지역(시/군/동 표기), 약국명, 피코프렌즈, 방문, 회원가입 검색
2. **필터 사용시 나타나는 테이블**

#### 데이터 테이블

**컬럼:**
- 이름
- 지역
- 약국
- 방문날짜
- 설문 완료 시각
- 상태
- 월근(?)
- 비고

**상태:**
- 방문인증
- 회원가입
- 방문거절

**CSV 다운로드:**
- 검색 결과를 CSV 형태로 다운로드

**페이지네이션:**
- 내역이 많을 경우 다음 페이지로 이동

#### Description 설명
1. **조건부 검색 필터**: 더욱, 지역(시/군/동 표기), 약국명, 피코프렌즈, 방문, 회원가입 검색
2. **비고의 경우**: 구글 설문 데이터 불러오기 가능할 때 해당 약국에 대한 데이터를 확인할 수 있고, 클릭 시 게시판 목록처럼 표시
3. **전체 보기 및 각 인원의 랜 마시어먼트**: 총 배정 수, 완료 수, 달성률
   - **달성률** = 완료 수 ÷ 총 배정 수
4. **검색 결과를 CSV 형태로 다운로드**
5. **내역이 많을 경우 다음 페이지로 이동**

---

## 3. 기술 스택 및 구현 고려사항

### 3.1 프론트엔드 구현

**동적 설문 폼:**
- 관리자가 설정한 설문 항목을 동적으로 렌더링
- React Hook Form 또는 Formik 사용 권장
- 체크박스, 라디오 버튼, 텍스트 입력 등 다양한 입력 타입 지원

**유효성 검증:**
- 필수 항목 입력 검증
- 전화번호 형식 검증 (010-XXXX-XXXX)
- 텍스트 길이 제한 (단답형: 100자, 장문형: 1000자)

### 3.2 백오피스 구현

**약국 히스토리 팝업:**
- 모달 또는 사이드 패널 형태로 구현
- 방문 이력을 시간순 (최신순 또는 오래된순) 정렬
- 설문조사 내용 조회 기능 (중첩 모달 또는 아코디언)

**관리자 비고 작성:**
- 인라인 편집 기능 (더블클릭 또는 편집 버튼)
- 작성일시 및 작성자 자동 기록
- 수정 이력 관리 (선택사항)

### 3.3 데이터베이스 설계

**주요 테이블:**
- `users`: 사용자 정보 (피코프렌즈, 관리자)
- `pharmacies`: 약국 정보
- `pharmacy_visits`: 약국 방문 기록
- `survey_templates`: 설문지 템플릿
- `survey_responses`: 설문 응답
- `work_assignments`: 업무 배정
- `notices`: 공지사항
- `rankings`: 랭킹 데이터 (주간 집계)

**관계:**
- `pharmacies` ↔ `pharmacy_visits` (1:N)
- `pharmacy_visits` ↔ `survey_responses` (1:1)
- `pharmacy_visits` ↔ `users` (N:1)
- `work_assignments` ↔ `users` (N:1)
- `work_assignments` ↔ `pharmacies` (N:1)

### 3.4 기타 참고사항

- 일부 데이터 빠진 경우, 상세의 경우 **Redash** 활용
- 이미지의 경우 **카페24 이미지** 사용
- 설문조사는 **구글 설문** 연동 가능성 고려
- 실시간 데이터 동기화는 WebSocket 또는 폴링 방식 고려

---

## 4. v1.3 주요 변경사항 요약

### 프론트엔드
1. **설문조사 항목 구체화**: 온라인 이용 현황, 피코프렌즈 반응 등 상세 항목 추가
2. **입력 형식 명확화**: 필수/선택 구분, 체크박스/라디오 버튼 타입 지정
3. **현장활동 계획 필드 추가**: 다음 단계 계획 작성 기능

### 백오피스
1. **약국 방문 히스토리 관리**: 약국별 모든 방문 이력 조회 가능
2. **설문조사 내용 확인**: 히스토리에서 설문 응답 전체 확인 가능
3. **관리자 비고 기능**: 각 방문 건별로 관리자 메모 작성/수정

---
